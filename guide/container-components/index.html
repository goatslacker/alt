<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Container Components</title>
  <meta name="description" content="A library for managing data within JavaScript applications. Alt is a pure flux implementation that is small, terse, well tested, extremely flexible, and forward thinking.
">

  <link rel="canonical" href="http://alt.js.org/guide/container-components/">
  <link rel="alternate" type="application/rss+xml" title="Alt" href="http://alt.js.org/feed.xml" />

  <link type="text/css" rel="stylesheet" href="/assets/bootstrap-navbar.css" />
  <link type="text/css" rel="stylesheet" href="/assets/lotus.min.css" />
  <link type="text/css" rel="stylesheet" href="/assets/prism.min.css" />
  <link type="text/css" rel="stylesheet" href="/assets/styles.css" />
</head>


  <body>

    <nav class="navbar navbar-default sp-horiz-lg">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a class="navbar-brand" href="/"><img src="/assets/alt.png" alt="Alt" width="40" /></a>
    </div>

    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div id="alt-search-app"></div>
      <ul class="nav navbar-nav navbar-right">
        <li>
          <a href="/guide/">Getting Started</a>
        </li>
        <li class="dropdown">
          <a href='#' class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">API Documentation <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li>
              <a href="/docs/">Alt</a>
            </li>
            
            <li>
              <a href="/docs/createActions">Creating Actions</a>
            </li>
            
            <li>
              <a href="/docs/actions">Actions</a>
            </li>
            
            <li>
              <a href="/docs/createStore">Creating Stores</a>
            </li>
            
            <li>
              <a href="/docs/stores">Stores</a>
            </li>
            
            <li>
              <a href="/docs/async">Handling Async</a>
            </li>
            
            <li>
              <a href="/docs/lifecycleListeners">Lifecycle Listeners</a>
            </li>
            
            <li>
              <a href="/docs/bootstrap">Bootstrap</a>
            </li>
            
            <li>
              <a href="/docs/takeSnapshot">Take Snapshot</a>
            </li>
            
            <li>
              <a href="/docs/flush">Flush</a>
            </li>
            
            <li>
              <a href="/docs/recycle">Recycle</a>
            </li>
            
            <li>
              <a href="/docs/rollback">Rollback</a>
            </li>
            
            <li>
              <a href="/docs/altInstances">Alt Instances</a>
            </li>
            
            <li>
              <a href="/docs/components/altContainer">AltContainer</a>
            </li>
            
          </ul>
        </li>
        <li>
          <a href="/blog/">Blog</a>
        </li>
        <li>
          <a href="https://gitter.im/goatslacker/alt">Support</a>
        </li>
        <li>
          <a href="https://github.com/goatslacker/alt">GitHub</a>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>


    <div class="main sp-vert-md sp-horiz-lg">
      <div class="row">
        <div class="col c2">
          <ul class="sidenav">
  
  <li>
    <a href="/guide/">Getting Started</a>
  </li>
  
  <li>
    <a href="/guide/actions/">Creating Actions</a>
  </li>
  
  <li>
    <a href="/guide/store/">Creating a Store</a>
  </li>
  
  <li>
    <a href="/guide/view/">Using your View</a>
  </li>
  
  <li>
    <a href="/guide/async/">Fetching Data</a>
  </li>
  
  <li>
    <a href="/guide/wait-for/">Data Dependencies</a>
  </li>
  
  <li>
    <a href="/guide/container-components">Container Components</a>
  </li>
  
  <li>
    <a href="/guides/es5/">Using Alt with ES5</a>
  </li>
  
</ul>

        </div>
        <div class="col c10">
          <div class="sp-horiz-md">
            <h1 id="container-components">Container Components</h1>

<p>Now that we’ve learned the basics on how to <a href="/guide/actions">create actions</a>, <a href="/guide/store">create stores</a>,<br />
and then <a href="/guide/view">listen to them in the view</a>; it’s time to learn some more advanced topics like container components.</p>

<p>What are <a href="https://medium.com/@learnreact/container-components-c0e67432e005">container components</a>?</p>

<p>They are components that are responsible for managing your state. Remember how in the view we would mix state and rendering?</p>

<pre><code class="language-js">var Locations = React.createClass({
  getInitialState() {
    return LocationStore.getState();
  },

  componentDidMount() {
    LocationStore.listen(this.onChange);
  },

  onChange(state) {
    this.setState(state);
  },

  render() {
    return (
      &lt;ul&gt;
        {this.state.locations.map((location) =&gt; {
          return (
            &lt;li&gt;{location.name}&lt;/li&gt;
          );
        })}
      &lt;/ul&gt;
    );
  }
});
</code></pre>

<p>This is actually a bad pattern to follow because it makes it more difficult to re-use view specific code. Your components should be split up into two types: those that manage state (stateful components) and those that just deal with the display of data (pure components). Some people call these <a href="https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0">smart/dumb components</a>.</p>

<p>The goal of pure components is to write them so they only accept props and are responsible for rendering those props into a view. This makes it easier to test and re-use those components. A simple example is a UserComponent, you can couple this with a UserStore, but then later on if you want to re-use UserComponent with your AdminStore you’re going to have a bad time.</p>

<p>A pure Locations component would look like:</p>

<pre><code class="language-js">var Locations = React.createClass({
  render() {
    return (
      &lt;ul&gt;
        {this.props.locations.map((location, i) =&gt; {
          return (
            &lt;li key={i}&gt;
              {location.name}
            &lt;/li&gt;
          );
        })}
      &lt;/ul&gt;
    );
  }
});
</code></pre>

<p>Seems easy enough, all we really did was change from <code>this.state</code> to <code>this.props</code> and removed all the store listening code. So wait, how do you listen to stores then? Enter the wrapping container component.</p>

<p>There are two ways to create a container component in Alt. Through a declarative approach and through a function, we can check out both.</p>

<h3 id="connecttostores">connectToStores</h3>

<p>This is a util function that will connect a component to a store.</p>

<pre><code class="language-js">var LocationsContainer = connectToStores({
  getStores() {
    // this will handle the listening/unlistening for you
    return [LocationStore]
  },

  getPropsFromStores() {
    // this is the data that gets passed down as props
    return LocationStore.getState()
  }
}, React.createClass({
  render() {
    return &lt;Locations locations={this.props.locations} /&gt;
  }
}))
</code></pre>

<p>As you can see, locations can now be re-used in other places since it’s not tied to a particular store. All locations will do is accept an array of locations and concern itself with rendering them. This may seem like extra boilerplate but you’ll be grateful for it later on when coming back to the app to maintain it. As a bonus, connectToStores handles the listening and unlistening of your stores. Every time a store changes, <code>getPropsFromStores</code> is called and the result of it is passed down as props to the connected component.</p>

<h3 id="altcontainer">AltContainer</h3>

<p>This is a component you can use to declaratively connect a store, or pass down actions, or context to the pure components.</p>

<pre><code class="language-js">var LocationsContainer = React.createClass({
  render() {
    return (
      &lt;AltContainer store={LocationStore}&gt;
        &lt;Locations /&gt;
      &lt;/AltContainer&gt;
    )
  }
}))
</code></pre>

<p>With AltContainer, hooking up a single store to a single component is fairly simple, we use the <code>store</code> prop. This will automatically listen and unlisten to your store and whenever state changes it’ll re-render the child components passing the entire store’s state as props to each component.</p>

          </div>
        </div>
      </div>
    </div>

    <script type="application/javascript" src="http://alt.js.org/assets/search.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/prism/0.0.1/prism.min.js"></script>
<script type="text/javascript">
  // Alias for javascript so syntax highlighting works fine
  Prism.languages.js = Prism.languages.javascript;
</script>
<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.2.min.js" ></script>
<script type="text/javascript" src="/assets/bootstrap-navbar.min.js"></script>


  </body>

</html>
